{% extends 'sidenav.html' %}
{% block title %}AI Analysis{% endblock %}
{% block content %}

    <div class="mb-3">

        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="#">AI Analysis</a></li>
            <li class="breadcrumb-item active" aria-current="page">AI Chatbot</li>
        </ol>
    </div>

    <div class="col-3 mb-3">
        <select id="tableTypeSelector" class="form-select">
            <option value="product">Product Table</option>
            <option value="recent_purchases">Recent Purchases</option>
            <option value="other">Product Inventory</option>
            <!-- Add more options as needed -->
        </select>
    </div>

    <button id="generateOpenAIResponseBtn" class="btn btn-primary">Generate Intelligent Analysis Products</button>

    <pre>
        <code>
            <div id="responseContainer">
                <!-- The generated response will be displayed here -->
            </div>

        </code>
    </pre>


    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script>
        $(document).ready(function () {
            // Handle button click
            $("#generateOpenAIResponseBtn").click(function () {
                // Get the selected table type from the dropdown
                var tableType = $("#tableTypeSelector").val();

                // Make AJAX request to the generate_openai_response endpoint with the selected table type
                $.ajax({
                    url: '/generate_openai_response/' + tableType + '/',
                    type: 'GET',
                    success: function (response) {
                        // Display the generated response in the response container
                        $("#responseContainer").html(response.generated_response);
                    },
                    error: function (error) {
                        console.error('Error:', error);
                    }
                });
            });
        });
    </script>


{% endblock %}